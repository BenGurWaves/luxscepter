<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Lux Scepter — Founding Bloodline</title>
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&display=swap" as="style">
<style>
:root{
  --bg:#080808;
  --paper:#0f0e0d;
  --gold:#C9A84A;
  --ivory:#F6F2EA;
  --tan:#CBB896;
  --accent:#9B7A3B;
  --muted: rgba(201,168,74,0.08);
  --max-width: 1100px;
  --word-font: 'Playfair Display', 'Times New Roman', serif;
  --ui-font: 'Times New Roman', serif;
}

/* mobile-first reset */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(800px 400px at 10% 10%, rgba(155,122,59,0.035), transparent 8%),
    radial-gradient(900px 420px at 90% 90%, rgba(200,185,140,0.02), transparent 8%),
    var(--bg);
  color:var(--ivory);
  font-family:var(--ui-font);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  overflow:hidden;
}

/* container / stage */
.stage{
  width:100%;
  height:100vh;
  max-width:var(--max-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  position:relative;
  text-align:center;
  padding:28px;
  gap:18px;
}

/* centered vertical gold hairline */
.hairline {
  position:absolute;
  left:50%;
  top:0;
  transform:translateX(-50%) scaleY(0);
  width:1px;
  height:100%;
  background:linear-gradient(180deg,var(--gold), rgba(201,168,74,0.6));
  transform-origin:top;
  box-shadow:0 0 36px rgba(201,168,74,0.08);
  animation:drawHair 1.2s ease forwards 0.06s;
}
@keyframes drawHair{ from{transform:translateX(-50%) scaleY(0)} to{transform:translateX(-50%) scaleY(1)} }

/* soft flash */
.flash {
  position:absolute; inset:0;
  background:rgba(201,168,74,0.12);
  opacity:0;
  pointer-events:none;
  animation:flashIn .18s linear forwards;
}
@keyframes flashIn{ from{opacity:1} to{opacity:0} }

/* logo block */
.logo {
  z-index:6;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  pointer-events:none;
}
.crown-badge {
  width:120px;
  height:120px;
  border-radius:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  transform:translateY(6px);
  opacity:0;
  background: linear-gradient(180deg, rgba(201,168,74,0.12), rgba(201,168,74,0.04));
  border: 2px solid rgba(201,168,74,0.26);
  box-shadow: 0 18px 40px rgba(0,0,0,0.6), inset 0 -8px 18px rgba(0,0,0,0.12);
  transition: transform 700ms cubic-bezier(.2,.9,.28,1), opacity .6s ease;
  font-family: var(--word-font);
}
.crown-badge--visible{ transform:translateY(0); opacity:1; }

/* glyph itself */
.crown-glyph {
  font-size:54px;              /* adjust scale */
  color:var(--gold);
  line-height:1;
  transform:translateY(2px);
  text-shadow: 0 2px 0 rgba(0,0,0,0.45), 0 6px 18px rgba(0,0,0,0.55);
  will-change: transform;
  display:inline-block;
  font-variant: small-caps;
}

/* wordmark */
.wordmark{
  font-family: var(--word-font);
  color:var(--gold);
  font-size:2rem;
  letter-spacing:0.06em;
  font-weight:700;
  opacity:0;
  transform:translateY(6px);
  display:inline-block;
  will-change:transform,opacity;
}
.wordmark span{
  display:inline-block;
  opacity:0;
  transform:translateY(6px);
  transition: transform .36s cubic-bezier(.2,.9,.28,1), opacity .36s;
  font-variant: small-caps;
}

/* tagline */
.tag{
  margin-top:4px;
  color:var(--tan);
  font-size:13px;
  opacity:0;
  transform:translateY(6px);
  transition: all .45s ease;
}

/* UI blocks: top-right panel, testimonial */
.topRight {
  position:absolute;
  top:22px;
  right:22px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
  border-radius:10px;
  padding:10px 12px;
  border:1px solid rgba(201,168,74,0.06);
  backdrop-filter:blur(6px);
  z-index:8;
  text-align:right;
  font-size:13px;
  color:var(--ivory);
}
.topRight .count{
  color:var(--gold);
  font-weight:700;
  font-size:15px;
}
.topRight .countdown{ margin-top:6px; color:var(--tan); font-weight:600; font-size:12px }

/* testimonial */
.testimonial {
  position:absolute;
  left:18px;
  bottom:110px;
  max-width:58%;
  color:var(--ivory);
  font-size:13px;
  opacity:.95;
  z-index:6;
}

/* CTAs */
.cta {
  position:absolute;
  bottom:48px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  flex-direction:column;
  gap:12px;
  width:92%;
  max-width:520px;
  align-items:center;
  z-index:7;
}
.btn {
  width:100%;
  border-radius:12px;
  padding:14px 18px;
  border:2px solid rgba(201,168,74,0.95);
  background:transparent;
  color:var(--gold);
  font-weight:700;
  letter-spacing:0.04em;
  cursor:pointer;
  transition: background .22s ease, transform .18s ease, box-shadow .18s ease;
  backdrop-filter: blur(2px);
  text-transform:uppercase;
}
.btn:hover{ transform:translateY(-3px); box-shadow:0 8px 28px rgba(0,0,0,0.45) }
.btn.primary{
  background:linear-gradient(180deg, rgba(201,168,74,0.06), rgba(201,168,74,0.02));
  color:var(--gold);
}
.btn.secondary{
  background:transparent;
  color:var(--ivory);
  border:1px solid rgba(255,255,255,0.04);
  text-transform:none;
  font-weight:600;
}

/* modal (signup) */
.modal-backdrop{
  position:fixed; inset:0;
  display:none; align-items:center; justify-content:center;
  background:rgba(0,0,0,0.6); z-index:50; padding:20px;
}
.modal{
  width:100%; max-width:520px; border-radius:12px;
  padding:22px; background:linear-gradient(180deg, #0b0b0b, #0f0f0f);
  border:1px solid rgba(201,168,74,0.06);
  box-shadow:0 20px 60px rgba(0,0,0,0.8);
  color:var(--ivory);
}
.modal h2{ margin:0 0 10px 0; font-family:var(--word-font); font-size:20px }
.input{ width:100%; padding:12px; border-radius:8px; background:#0b0b0b; color:var(--ivory); border:1px solid rgba(255,255,255,0.04) }
.row{ display:flex; gap:10px; margin-top:8px }

/* video phone mock (subtle frame) */
.phone {
  width:260px; height:520px; border-radius:28px; overflow:hidden;
  background:#000; border:8px solid rgba(255,255,255,0.03); box-shadow:0 12px 70px rgba(0,0,0,0.6);
}

/* shimmer trim: subtle animated sheen on gold elements */
.shimmer {
  position:absolute; inset:0; pointer-events:none; z-index:2;
  background: linear-gradient(120deg, rgba(255,255,255,0.00) 0%, rgba(255,255,255,0.02) 20%, rgba(255,255,255,0.06) 45%, rgba(255,255,255,0.02) 60%, rgba(255,255,255,0.00) 100%);
  mix-blend-mode:overlay; opacity:0.06;
  transform:translateX(-30%);
  animation: shimmer 9s linear infinite;
}
@keyframes shimmer{ 0%{transform:translateX(-30%)} 100%{transform:translateX(120%)} }

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  .hairline, .wordmark span, .crown-badge, .tag { transition: none !important; animation: none !important; transform:none !important; }
}

/* larger screens */
@media(min-width:780px){
  .wordmark{ font-size:2.8rem }
  .crown-badge{ width:150px; height:150px; border-radius:22px }
  .crown-glyph{ font-size:66px }
  .testimonial{ left:28px; bottom:152px }
  .cta{ bottom:72px }
}
  input::placeholder {
  color: #D4AF37; /* gold */
  opacity: 1; /* keep it fully visible */
}
</style>
</head>
<body>
  <div class="stage" id="stage" role="main" aria-live="polite">
    <div class="hairline" id="hairline"></div>

    <!-- soft shimmer overlay (very subtle) -->
    <div class="shimmer" aria-hidden="true"></div>

    <div class="logo" id="logo">
      <!-- Badge using the glyph ♔ for a crisp minimal royal mark -->
      <div class="crown-badge" id="crownBadge" aria-hidden="false" role="img" aria-label="Crown emblem">
        <span class="crown-glyph" aria-hidden="true">♔</span>
      </div>

      <div id="wordmark" class="wordmark" aria-label="LUX SCEPTER" role="heading"></div>
      <div id="tagline" class="tag">Rule the feed. Own the crown.</div>
    </div>

    <div class="topRight" id="topRight" aria-hidden="false">
      <div class="count" id="liveCount">— people ruling right now</div>
      <div class="countdown" id="countdown">Founding Bloodline closes in —</div>
    </div>

    <div class="testimonial" id="testimonial" aria-live="polite">“Founding Bloodline #127 — appreciation up 40x” — @kingvault</div>

    <div class="cta" id="cta">
      <button class="btn primary" id="claim">Claim Your Crown</button>
      <button class="btn secondary" id="watch">Watch the Throne</button>
      <div style="font-size:12px;color:var(--tan);opacity:.95">Founding Bloodline — exclusive access</div>
    </div>
  </div>

  <!-- sign modal -->
  <div class="modal-backdrop" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <h2 id="modalTitle">Sign Up</h2>
      <div id="modalError" style="color:#ff6b6b;margin-top:6px"></div>
      <form id="auth" autocomplete="on">
        <input type="text" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Password">
        <div class="row">
          <button type="submit" class="btn primary" id="submitAuth">Sign Up</button>
          <button type="button" class="btn" id="closeModal">Close</button>
        </div>
        <div style="margin-top:10px;display:flex;justify-content:space-between;align-items:center">
          <div style="font-size:13px;color:var(--tan)">Already have an account?</div>
          <button type="button" id="toggleAuth" style="background:none;border:none;color:var(--tan);text-decoration:underline;cursor:pointer">Sign In</button>
        </div>
      </form>
    </div>
  </div>

  <!-- video modal -->
  <div class="modal-backdrop" id="videoModal" style="display:none" aria-hidden="true">
    <div class="phone" role="dialog" aria-modal="true">
      <video id="demo" playsinline muted loop controls preload="metadata" style="width:100%;height:100%;object-fit:cover">
        <source src="grok-video-5c35aad5-a59c-46f9-b7f8-b335ad6b8b94-2.mp4" type="video/mp4">
        Your browser doesn't support video.
      </video>
    </div>
  </div>

<script type="module">
/* =========== SUPABASE SETUP (unchanged wiring) =========== */
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
const supabaseUrl = 'https://uewvmldolwgihfkxwlsl.supabase.co'
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVld3ZtbGRvbHdnaWhma3h3bHNsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5MzQ1MjksImV4cCI6MjA3OTUxMDUyOX0.b9C00OjIkAUDPztC8RtdHcwjdgX4OrShNW_pp6r-_qI'
const supabase = createClient(supabaseUrl, supabaseKey)

/* ====== ELEMENTS ====== */
const hairline = document.getElementById('hairline')
const crownBadge = document.getElementById('crownBadge')
const crownGlyph = document.querySelector('.crown-glyph')
const wordmark = document.getElementById('wordmark')
const tagline = document.getElementById('tagline')
const liveCount = document.getElementById('liveCount')
const countdown = document.getElementById('countdown')
const testimonial = document.getElementById('testimonial')
const claim = document.getElementById('claim')
const watch = document.getElementById('watch')
const modal = document.getElementById('modal')
const videoModal = document.getElementById('videoModal')
const demo = document.getElementById('demo')
const authForm = document.getElementById('auth')
const modalTitle = document.getElementById('modalTitle')
const submitAuth = document.getElementById('submitAuth')
const closeModal = document.getElementById('closeModal')
const toggleAuth = document.getElementById('toggleAuth')
const modalError = document.getElementById('modalError')
const emailInput = document.getElementById('email')
const passwordInput = document.getElementById('password')

/* ====== WORDMARK BUILD & REVEAL ====== */
const TEXT = 'LUX SCEPTER'
function buildWord(){
  wordmark.innerHTML = ''
  for(let i=0;i<TEXT.length;i++){
    const ch = TEXT[i]
    const s = document.createElement('span')
    s.textContent = ch === ' ' ? '\u00A0' : ch
    s.style.transitionDelay = `${i*0.08}s`
    wordmark.appendChild(s)
  }
}
buildWord()

function reveal(){
  crownBadge.classList.add('crown-badge--visible')
  const spans = wordmark.querySelectorAll('span')
  wordmark.style.opacity = 1
  spans.forEach((sp, i)=>{
    setTimeout(()=>{ sp.style.opacity=1; sp.style.transform='translateY(0)'; }, 160 + i*72)
  })
  setTimeout(()=> { tagline.style.opacity=1; tagline.style.transform='translateY(0)'; }, 160 + spans.length*72 + 120)
  setTimeout(()=> {
    document.getElementById('cta').classList.add('fade')
    document.getElementById('topRight').classList.add('fade')
  }, 160 + spans.length*72 + 300)
}

/* hairline animation end triggers flash + reveal */
hairline.addEventListener('animationend', ()=>{
  const f = document.createElement('div'); f.className='flash'; document.body.appendChild(f)
  setTimeout(()=> f.remove(), 220)
  reveal()
})

/* Glyph subtle parallax (tiny) */
const MAX = 4
document.addEventListener('pointermove', (e)=>{
  const r = crownBadge.getBoundingClientRect()
  const cx = r.left + r.width/2
  const cy = r.top + r.height/2
  const dx = (e.clientX - cx)/r.width * MAX
  const dy = (e.clientY - cy)/r.height * MAX
  crownBadge.style.transform = `translate(${dx}px, ${dy}px)`
})
document.addEventListener('pointerleave', ()=> crownBadge.style.transform = '')

/* ====== Testimonials rotation (dignified) ====== */
const TESTS = [
  '“Just made $4,200 in 3 hours” — @emperorwave',
  '“They licensed my 15s Edict” — @duchessluxe',
  '“Founding Bloodline #127 — appreciation up 40x” — @kingvault'
]
let tIndex=0
function rotate(){
  testimonial.style.opacity=0
  setTimeout(()=>{ testimonial.textContent = TESTS[tIndex%TESTS.length]; testimonial.style.opacity=0.95; tIndex++ }, 520)
}
rotate(); setInterval(rotate, 4200)

/* ====== Live counter ====== */
let displayed = 0
async function fetchCount(){
  try{
    const res = await supabase.from('profiles').select('id', { head: true, count: 'exact' })
    if(res.error && res.status !== 406) return
    const count = res.count || 0
    animateCount(count)
  }catch(e){}
}
function animateCount(target){
  target = Math.max(0, parseInt(target))
  const start = displayed
  const delta = target - start
  if(delta===0){ liveCount.textContent = `${numberWithCommas(start)} people ruling right now`; return }
  const steps = 24; let i=0
  const timer = setInterval(()=>{
    i++
    const progress = Math.pow(i/steps,0.9)
    const cur = Math.round(start + delta*progress)
    displayed = cur
    liveCount.textContent = `${numberWithCommas(cur)} people ruling right now`
    if(i>=steps){ clearInterval(timer); displayed = target }
  }, 70)
}
function numberWithCommas(x){ return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") }
fetchCount(); setInterval(fetchCount, 11000)

/* ====== Countdown (now + 11d 4h 12m) ====== */
const target = new Date(Date.now() + (11*24*60*60*1000) + (4*60*60*1000) + (12*60*1000))
function updateCountdown(){
  const diff = target - Date.now()
  if(diff<=0){ countdown.textContent = 'Founding Bloodline closed'; return }
  const d = Math.floor(diff / (1000*60*60*24))
  const h = Math.floor((diff % (1000*60*60*24))/(1000*60*60))
  const m = Math.floor((diff % (1000*60*60))/(1000*60))
  countdown.textContent = `Founding Bloodline closes in ${d}d ${h}h ${m}m`
}
updateCountdown(); setInterval(updateCountdown, 60*1000)

/* ====== CTA behaviors & modals ====== */
claim.addEventListener('click', ()=> openAuth(true))
watch.addEventListener('click', ()=> openDemo())

function openAuth(signUp=true){
  modal.style.display='flex'; modal.setAttribute('aria-hidden','false')
  modalTitle.textContent = signUp ? 'Sign Up' : 'Sign In'
  submitAuth.textContent = signUp ? 'Sign Up' : 'Sign In'
  emailInput.value=''; passwordInput.value=''
  setTimeout(()=> emailInput.focus(), 120)
}
function closeAuth(){ modal.style.display='none'; modal.setAttribute('aria-hidden','true') }
function openDemo(){ videoModal.style.display='flex'; videoModal.setAttribute('aria-hidden','false'); demo.currentTime=0; demo.muted=true; demo.play().catch(()=>{}) }
function closeDemo(){ videoModal.style.display='none'; videoModal.setAttribute('aria-hidden','true'); demo.pause() }

closeModal.addEventListener('click', closeAuth)
document.getElementById('modal').addEventListener('click', (e)=>{ if(e.target === document.getElementById('modal')) closeAuth() })
document.getElementById('videoModal').addEventListener('click', (e)=>{ if(e.target === document.getElementById('videoModal')) closeDemo() })

toggleAuth.addEventListener('click', ()=>{
  const isSignUp = submitAuth.textContent.trim().toLowerCase().includes('sign up')
  submitAuth.textContent = isSignUp ? 'Sign In' : 'Sign Up'
  modalTitle.textContent = submitAuth.textContent
})

/* ====== Auth handling (supabase) ====== */
authForm.addEventListener('submit', async (ev)=>{
  ev.preventDefault(); modalError.textContent=''
  const email = emailInput.value.trim(), pwd = passwordInput.value.trim()
  if(!email || !pwd){ modalError.textContent = 'Email and password required'; return }
  submitAuth.disabled = true
  try{
    const isSignUp = submitAuth.textContent.trim().toLowerCase().includes('sign up')
    if(isSignUp){
      const { data, error } = await supabase.auth.signUp({ email, password: pwd })
      if(error){ modalError.textContent = error.message || 'Sign up failed'; submitAuth.disabled=false; return }
      try{ await supabase.from('profiles').insert({ id: data.user.id, email, is_creator:false }) }catch(e){}
      window.location.href = 'home.html'
    } else {
      const { data, error } = await supabase.auth.signInWithPassword({ email, password: pwd })
      if(error){ modalError.textContent = error.message || 'Sign in failed'; submitAuth.disabled=false; return }
      window.location.href = 'home.html'
    }
  }catch(e){ modalError.textContent='Unexpected error'; console.error(e) } finally{ submitAuth.disabled=false }
})

/* ====== boot fallback ====== */
document.addEventListener('DOMContentLoaded', ()=>{
  setTimeout(()=>{ if(!crownBadge.classList.contains('crown-badge--visible')) reveal() }, 2200)
})

/* small accessibility */
wordmark.setAttribute('aria-hidden','false'); tagline.setAttribute('aria-hidden','false')
</script>
</body>
</html>
