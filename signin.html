<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sign in — Founders Crown</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container" style="max-width:520px">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div style="font-family:var(--brand-font);font-size:20px;color:var(--white)">BenGurWaves</div>
    <a class="link small" href="index.html">Home</a>
  </div>

  <h2 style="margin-top:32px;font-family:var(--brand-font)">Sign in</h2>
  <p class="small">Enter your email to receive a magic link.</p>

  <form id="signinForm" style="margin-top:18px;display:flex;flex-direction:column;gap:12px">
    <input id="email" type="email" placeholder="you@example.com" required style="padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--white)" />
    <button class="btn" type="submit">Send magic link</button>
  </form>

  <div id="msg" class="small" style="margin-top:12px;color:var(--tan)"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<script>
const SUPABASE_URL = 'https://YOUR-PROJECT.supabase.co';
const SUPABASE_ANON_KEY = 'YOUR_ANON_KEY';
const supabase = supabaseJs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

document.getElementById('signinForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const email = document.getElementById('email').value;
  document.getElementById('msg').textContent = 'Sending…';
  try {
    const { error } = await supabase.auth.signInWithOtp({ email, options: { emailRedirectTo: window.location.origin + '/feed.html' }});
    if (error) document.getElementById('msg').textContent = 'Sign-in failed: ' + error.message;
    else document.getElementById('msg').textContent = 'Magic link sent. Check your email.';
  } catch (err) {
    document.getElementById('msg').textContent = 'Unexpected error';
    console.error(err);
  }
});
</script>
</body>
</html>
